# This is a sweep on different phase changing strategies and how
# it can affect the training process for larger datasets
project: syntren
checkpoint_interval: 30
default_root_dir: experiments/sweep
use_smart_trainer: True
agent_run_args:
  count: 1
sweep_configuration:
  method: grid
  metric:
    goal: minimize
    name: metrics/average-backward_relative_penalty
  parameters:
    sweep_group_A_scheduling:
      sweep: True
      sweep_identifier: 0scheduling
      sweep_alias:
        - fast
        - slow
      values:
        - trainer:
            max_epochs: 2000
            callbacks:
              sweep_list_operations:
                - sweep_overwrite: 1
              init_args:
                maximization_epoch_limit: 80
                expectation_epoch_limit: 60
                patience: 15
                cooldown: 200
          model:
            init_args:
              scheduler_args:
                - factor: 0.5
                  patience: 70
                - factor: 0.5
                  patience: 60
        - trainer:
            max_epochs: 10000
            callbacks:
              sweep_list_operations:
                - sweep_overwrite: 1
              init_args:
                maximization_epoch_limit: 100
                expectation_epoch_limit: 80
                patience: 15
                cooldown: 200
          model:
            init_args:
              scheduler_args:
                - factor: 0.5
                  patience: 300
                - factor: 0.5
                  patience: 250
        # - trainer:
        #     max_epochs: 10000
        #     callbacks:
        #       sweep_list_operations:
        #         - sweep_overwrite: 1
        #       init_args:
        #         maximization_epoch_limit: 120
        #         expectation_epoch_limit: 90
        #         patience: 15
        #         cooldown: 200
        #   model:
        #     init_args:
        #       scheduler_args:
        #         - factor: 0.8
        #           patience: 120
        #         - factor: 0.8
        #           patience: 120
    sweep_group_B_dataset:
      sweep: True
      sweep_identifier: 1dataset
      sweep_alias:
        - hi0
        - hi1
        - hi2
        - hi3
        - hi4
        - hi5
        - hi6
        - hi7
        - hi8
        - hi9
      values:
        - data:
            class_path: lightning_toolbox.DataModule
            init_args:
              batch_size: 128
              dataset: ocd.data.real_world.syntren.SyntrenOCDDataset
              val_size: 0.01
              dataset_args:
                data_id: 0
                standardization: True
                reject_outliers_n_far_from_mean: 5.0
        - data:
            class_path: lightning_toolbox.DataModule
            init_args:
              batch_size: 128
              dataset: ocd.data.real_world.syntren.SyntrenOCDDataset
              val_size: 0.01
              dataset_args:
                data_id: 1
                standardization: True
                reject_outliers_n_far_from_mean: 5.0
        - data:
            class_path: lightning_toolbox.DataModule
            init_args:
              batch_size: 128
              dataset: ocd.data.real_world.syntren.SyntrenOCDDataset
              val_size: 0.01
              dataset_args:
                data_id: 2
                standardization: True
                reject_outliers_n_far_from_mean: 5.0
        - data:
            class_path: lightning_toolbox.DataModule
            init_args:
              batch_size: 128
              dataset: ocd.data.real_world.syntren.SyntrenOCDDataset
              val_size: 0.01
              dataset_args:
                data_id: 3
                standardization: True
                reject_outliers_n_far_from_mean: 5.0
        - data:
            class_path: lightning_toolbox.DataModule
            init_args:
              batch_size: 128
              dataset: ocd.data.real_world.syntren.SyntrenOCDDataset
              val_size: 0.01
              dataset_args:
                data_id: 4
                standardization: True
                reject_outliers_n_far_from_mean: 5.0
        - data:
            class_path: lightning_toolbox.DataModule
            init_args:
              batch_size: 128
              dataset: ocd.data.real_world.syntren.SyntrenOCDDataset
              val_size: 0.01
              dataset_args:
                data_id: 5
                standardization: True
                reject_outliers_n_far_from_mean: 5.0
        - data:
            class_path: lightning_toolbox.DataModule
            init_args:
              batch_size: 128
              dataset: ocd.data.real_world.syntren.SyntrenOCDDataset
              val_size: 0.01
              dataset_args:
                data_id: 6
                standardization: True
                reject_outliers_n_far_from_mean: 5.0
        - data:
            class_path: lightning_toolbox.DataModule
            init_args:
              batch_size: 128
              dataset: ocd.data.real_world.syntren.SyntrenOCDDataset
              val_size: 0.01
              dataset_args:
                data_id: 7
                standardization: True
                reject_outliers_n_far_from_mean: 5.0
        - data:
            class_path: lightning_toolbox.DataModule
            init_args:
              batch_size: 128
              dataset: ocd.data.real_world.syntren.SyntrenOCDDataset
              val_size: 0.01
              dataset_args:
                data_id: 8
                standardization: True
                reject_outliers_n_far_from_mean: 5.0
        - data:
            class_path: lightning_toolbox.DataModule
            init_args:
              batch_size: 128
              dataset: ocd.data.real_world.syntren.SyntrenOCDDataset
              val_size: 0.01
              dataset_args:
                data_id: 9
                standardization: True
                reject_outliers_n_far_from_mean: 5.0
